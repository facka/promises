<md-content layout="column">


    <md-content flex="" layout-padding="">

      <div layout="column" layout-fill="" layout-align="top center">
        <h1>Step 2</h1>

        <p>A Promise can be reject, so we are going to add the reject function</p>

        <div>
            <p> <strong>then:</strong> receives a function that will be executed when the promise is resolved and a function that will be executed when the promise is rejected </p>
        </div>
        <div>
            <p> <strong>reject:</strong> receives the reason of way the promises was rejected and call the callback received in the reject function</p>
        </div>

        <pre><code class="language-javascript">
          var Q = function() {
            var _then, _reject;
            this.then = function(callback, reject) {
                _then = callback;
                _reject = reject;
            };
            this.resolve = function(value) {
                _then(value);
            };
            this.reject = function(error) {
                _reject(error);
            };
          }
        </code></pre>

        <h3>Great! now we can manage rejected promises :)</h3>

        <h2>Test it:</h2>

        <div>To test this we are going create an Async action that returns a promise:</div>

        <pre><code class="language-javascript">
          var AsyncAction = function(action) {
            return function(){
                var args = Array.prototype.slice.call(arguments);
                var promise = new Q();
                setTimeout(function() {
                    try {
                      var value = action.apply(this, args);
                      promise.resolve(value);
                    }
                    catch (e) {
                      promise.reject(e);
                    }
                },1000);
                return promise;
            };
          }

          var multiply = AsyncAction(function(arg, arg1) {
            throw "An error";
          });
        </code></pre>

          <js-editor>

var p = multiply(2,4);
p.then(function(result) {
  console.log(result);
},function(error) {
  console.log(error);
});
        </js-editor>


      </div>

      <div flex=""></div>

    </md-content>

</md-content>

